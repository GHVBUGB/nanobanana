# OpenRouter API 环境变量配置指南

## 1. 创建环境变量文件

在你的项目根目录 `ai-image-platform` 下创建 `.env.local` 文件：

### Windows 用户：
```cmd
cd ai-image-platform
echo. > .env.local
```

### 或者手动创建：
在 `ai-image-platform` 文件夹中右键 → 新建 → 文本文档 → 重命名为 `.env.local`

## 2. 环境变量内容

将以下内容复制到 `.env.local` 文件中：

```env
# OpenRouter API 配置
# 请将下面的 "你的OpenRouter API密钥" 替换为你的实际API密钥
OPENROUTER_API_KEY=你的OpenRouter API密钥

# OpenRouter API 基础配置
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_MODEL=google/gemini-2.5-flash-image-preview

# HTTP 请求头配置
OPENROUTER_HTTP_REFERER=http://localhost:3000
OPENROUTER_X_TITLE=AI Image Platform

# 其他可选的图像生成模型（取消注释以使用）
# OPENROUTER_MODEL=anthropic/claude-3.5-sonnet
# OPENROUTER_MODEL=openai/gpt-4-vision-preview
# OPENROUTER_MODEL=google/gemini-pro-vision

# 开发环境配置
NODE_ENV=development
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

## 3. 获取 OpenRouter API 密钥

1. 访问 [OpenRouter 官网](https://openrouter.ai)
2. 注册账户并登录
3. 前往 [API Keys 页面](https://openrouter.ai/keys)
4. 点击 "Create Key" 创建新的 API 密钥
5. 复制生成的密钥
6. 将密钥粘贴到 `.env.local` 文件中的 `OPENROUTER_API_KEY=` 后面

## 4. 验证配置

创建完环境变量文件后，重启你的开发服务器：

```bash
npm run dev
# 或
pnpm dev
# 或
yarn dev
```

## 5. 测试 API 连接

你可以通过以下方式测试 API 是否正常工作：

1. 启动应用：`npm run dev`
2. 打开浏览器访问：`http://localhost:3000`
3. 尝试使用任何一个图像生成功能
4. 查看浏览器控制台是否有错误信息

## 6. 常见问题

### 问题1：API 密钥无效
- 检查密钥是否正确复制
- 确保没有多余的空格或换行符
- 验证密钥是否在 OpenRouter 账户中有效

### 问题2：网络连接问题
- 检查网络连接
- 确认可以访问 `https://openrouter.ai`
- 检查防火墙设置

### 问题3：模型不支持
- 当前配置使用 `google/gemini-2.5-flash-image-preview`
- 如需更换模型，修改 `OPENROUTER_MODEL` 变量
- 查看 [OpenRouter 模型列表](https://openrouter.ai/models) 了解可用模型

## 7. 安全注意事项

- ⚠️ 永远不要将 `.env.local` 文件提交到版本控制系统
- ⚠️ 不要将 API 密钥分享给他人
- ⚠️ 定期轮换 API 密钥以确保安全

## 8. 支持的模型

以下是一些推荐的模型：

- `google/gemini-2.5-flash-image-preview` - 当前默认，支持图像理解
- `anthropic/claude-3.5-sonnet` - 优秀的文本和图像理解
- `openai/gpt-4-vision-preview` - GPT-4 视觉模型
- `google/gemini-pro-vision` - Google 的视觉模型

要更换模型，只需修改 `.env.local` 文件中的 `OPENROUTER_MODEL` 值即可。

